/*! wPaint - v2.5.0 - 2014-03-01 */
if(screen.width < 800) {
    function saveimg() {
	this.options.saveImg.apply(this,[this.getImage()])
    }
        function saveimglocal() {
	var canvas = document.getElementById('wPaint-canvas');
      var context = canvas.getContext('2d');
      // save canvas image as data url (png format by default)
      var dataURL = canvas.toDataURL();

      // set canvasImg image src to dataURL
      // so it can be saved as an image
//document.getElementById('canvasImg').href = dataURL;
OpenInNewTab(dataURL);
 //$("#canvasImg").click();
	}
        function loadimg() {
this.options.loadImgFg.apply(this,[])
    }
        function loadimglocal() {
	var canvas = document.getElementById('wPaint-canvas');
      var context = canvas.getContext('2d');
      // save canvas image as data url (png format by default)
      var dataURL = canvas.toDataURL();

      // set canvasImg image src to dataURL
      // so it can be saved as an image
//document.getElementById('canvasImg').href = dataURL;
OpenInNewTab(dataURL);
 //$("#canvasImg").click();
    }
} else {
    function saveimglocal() {
	this.options.saveImg.apply(this,[this.getImage()])
    }
        function saveimg() {
	var canvas = document.getElementById('wPaint-canvas');
      var context = canvas.getContext('2d');
      // save canvas image as data url (png format by default)
      var dataURL = canvas.toDataURL();

      // set canvasImg image src to dataURL
      // so it can be saved as an image
//document.getElementById('canvasImg').href = dataURL;
OpenInNewTab(dataURL);
 //$("#canvasImg").click();
    }
}
!function(a){
var b="plugins/file/img/icons-menu-main-file.png";a.extend(!0,a.fn.wPaint.menus.main.items,{
save:{
    icon:"generic",group:"save",title:"Save Image",img:b,index:0,callback:function(){
//	this.options.saveImg.apply(this,[this.getImage()])
	//	alert('hi');
	saveimg();
}
}
       ,loadIMG:{
icon:"generic",group:"save",title:"Save Image",img:b,index:1,callback:function(){
//this.options.savePng.apply(this,[])
    // alert('hi');
    saveimglocal();
}
}
,loadBg:{
icon:"generic",group:"loadImg",title:"Load Image to Foreground",img:b,index:2,callback:function(){
//this.options.loadImgFg.apply(this,[])
    loadimg();
}
}
,loadFg:{
icon:"generic",group:"loadImg",title:"Load Image to Background",img:b,index:1,callback:function(){
this.options.loadImgBg.apply(this,[])
}
}
 
}
),a.extend(a.fn.wPaint.defaults,{
saveImg:null,loadImgFg:null,loadImgBg:null
}
),a.fn.wPaint.extend({
_showFileModal:function(b,c){
function d(a,b){
function c(c){
c.stopPropagation(),"fg"===a?e.setImage(b):"bg"===a&&e.setBg(b,null,null,!0)
}
g.on("click",c)
}
for(var e=this,f=a("<div></div>"),g=null,h=0,i=c.length;i>h;h++)g=a('<img class="wPaint-modal-img"/>').attr("src",c[h]),g=a('<div class="wPaint-modal-img-holder"></div>').append(g),d(b,c[h]),f.append(g);this._showModal(f)
}
}
)
}
(jQuery);

